\nimport { defineTool } from 'genkit/tools';\nimport z from 'zod';\nimport { listFiles, readFile } from '../../services/file-system';\n\nconst codebaseQASchema = z.object({\n  question: z.string().describe('The question to ask about the codebase'),\n});\n\nexport const codebaseQATool = defineTool(\n  {\n    name: 'codebaseQA',\n    description: 'Ask questions about the codebase',\n    inputSchema: codebaseQASchema,\n    outputSchema: z.string(),\n  },\n  async ({ question }) => {\n    const files = await listFiles('.');\n    const fileContents = await Promise.all(\n      files.map(async (file) => {\n        const content = await readFile(file);\n        return { file, content };\n      })\n    );\n\n    const prompt = `You are a helpful AI assistant that can answer questions about a codebase. The user has the following files in their project:\\n\\n${fileContents\n      .map(({ file, content }) => `**${file}**\\n\`\`\`\\n${content}\\n\`\`\`\\n`)\n      .join('\\n')};`\n\n    const { text } = await ai.generate(prompt);\n    return text;\n  }\n);\n